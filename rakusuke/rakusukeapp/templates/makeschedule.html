{% extends 'base.html' %}
{% load static %}
{% block title %}らくらくスケジュール生成アプリ | らく助{% endblock %}

<html lang="ja" dir="ltr" type="text/javascript">
   <head>
     <meta charset="utf-8">
     <link ref="stylesheet" href="mystyle.css">
     <!-- ここにJavaScriptを読み込むコード -->
     <script src="{% static 'js/script.js' %}"></script>
     <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
   </head>
   {% block header%}
    <header class="masthead text-center text-black">
        <div class="masthead-content">
            <div class="container">
                <h1 class="masthead-heading mb-0">らく助</h1>
                <h3 class="masthead-subheading mb-0">スケジュール作成</h3>
            </div>
        </div>
    </header>
    {% endblock %}

   {% block contents %}
    <section>
    　<div id="app">
        <form method="POST" enctype="multipart/form-data">
             {% csrf_token %}
             <table v-for="(index, schedule) in schedules" v-bind:key="schedule.id">
                <tr style="text-align:center">
                    <th><!-- やるべきこと: -->{{ form.schedule_do.label_tag }}</th>
                    <td v-model="schedule.do"></td>
                </tr>
                <tr style="text-align:center">
                    <th><!-- カテゴリ: -->{{ form.schedule_category.label_tag }}</th>
                    <td v-for="item in categories">
                        <input type="radio" name="category" v-model="schedule.item">
                    </td>
                </tr>
                <tr style="text-align:center">
                    <th><!-- 1日の作業時間: -->{{ form.schedule_worktime.label_tag }}</th>
                    <td v-model="schedule.worktime"></td>
                </tr>
                <tr style="text-align:center">
                    <th><!-- 優先度: -->{{ form.schedule_priority.label_tag }}</th>
                    <td v-for="item in priorities">
                        <input type="radio" name="category" v-model="schedule.item">
                    </td>
                </tr>
                <tr style="text-align:center">
                    <th><!-- サボり日: -->{{ form.schedule_ditching.label_tag }}</th>
                    <td v-model="schedule.ditching"></td>
                </tr>
             </table>
             <table class="table-add">
                 <tr>
                     <td>
                         <button name="addFormBtn" v-on:click="append" class="add">
                            <img src="{% static 'assets/img/appendButton.png' %}"></img>
                         </button>
                     </td>
                 </tr>
             </table>
             <button class="left-btn" onclick="location.href='#'" >戻る</button>
             <button class="right-btn" type="submit" onclick="location.href='#'" >作成</button>
          </form>
        </div>

        <script>
            new Vue({
                el: '#app',
                data(): {
                    return {
                        schedules: [{
                                      do:{{ form.schedule_do }},
                                      categories:{{ form.schedule_category }},
                                      worktime:{{ form.schedule_worktime }},
                                      priorities:{{ form.schedule_priority }},
                                      ditching:{{ form.schedule_ditching }},
                                   }]
                    }
                },

                methods: {
                    append: function(){
                        this.schedules.push({
                                      do:{{ form.schedule_do }},
                                      categories:{{ form.schedule_category }},
                                      worktime:{{ form.schedule_worktime }},
                                      priorities:{{ form.schedule_priority }},
                                      ditching:{{ form.schedule_ditching }},
                                      })
                    },
                    del: function(index){
                        this.users.splice(index, 1)
                    },
                }
            })
         </script>
    </section>

    {% endblock %}

</html>